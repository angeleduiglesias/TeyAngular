<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<div class="form-card">
  
  
    
  <!-- Formulario habilitado -->
  <div *ngIf="mostrarFormulario && nombreEmpresa && !formularioEnviado && !mostrandoResumen && !pago2"  class="form-enabled">
    
    <!-- Pasos del formulario -->
    <div class="form-steps">
      <div class="step" *ngFor="let step of pasos; let i = index" 
          [ngClass]="{'active': pasoActual === i, 'completed': pasoActual > i}">
        {{i + 1}}
      </div>
    </div>
    
    <!-- Contenido del paso actual -->
    <div class="step-content" [ngSwitch]="pasoActual">
      
      <!-- Paso 1: Datos Personales -->
      <div *ngSwitchCase="0">
        <h3>Datos Personales</h3>
        <div class="form-group">
          <label>Nacionalidad <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_1.nacionalidad" placeholder="Ingrese su nacionalidad">
        </div>
        <div class="form-group">
          <label>Profesión <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_1.profesion" placeholder="Ingrese su profesión">
        </div>
        <div class="form-group">
          <label>Estado Civil <span class="required">*</span></label>
          <select [(ngModel)]="formularioSAC.paso_1.estado_civil">
            <option value="">Seleccione una opción</option>
            <option value="soltero">Soltero/a</option>
            <option value="casado">Casado/a</option>
            <option value="divorciado">Divorciado/a</option>
            <option value="viudo">Viudo/a</option>
          </select>
        </div>
        <!-- Campos condicionales para cónyuge -->
        <div *ngIf="formularioSAC.paso_1.estado_civil === 'casado'">
          <div class="form-group">
            <label>Nombre del Cónyuge</label>
            <input type="text" [(ngModel)]="formularioSAC.paso_1.nombre_conyuge" placeholder="Ingrese el nombre de su cónyuge">
          </div>
          <div class="form-group">
            <label>DNI del Cónyuge</label>
            <input type="text" [(ngModel)]="formularioSAC.paso_1.dni_conyuge" placeholder="Ingrese el DNI de su cónyuge">
          </div>
        </div>
        <div class="form-group">
          <label>Dirección</label>
          <input type="text" [(ngModel)]="formularioSAC.paso_1.direccion" placeholder="Ingrese su dirección">
        </div>
      </div>
      
      <!-- Paso 2: Datos de la Empresa -->
      <div *ngSwitchCase="1">
        <h3>Datos de la Empresa</h3>
        <div class="form-group">
          <label>Nombre de la Empresa <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_2.nombre_empresa" [value]="nombreEmpresa" readonly>
        </div>
        <div class="form-group">
          <label>Dirección de la Empresa</label>
          <input type="text" [(ngModel)]="formularioSAC.paso_2.direccion_empresa" placeholder="Ingrese la dirección de la empresa">
        </div>
        <div class="form-group">
          <label>Departamento</label>
          <select [(ngModel)]="formularioSAC.paso_2.departamento_empresa" (change)="onDepartamentoChange()">
            <option value="">Seleccione un departamento</option>
            <option value="Amazonas">Amazonas</option>
            <option value="Áncash">Áncash</option>
            <option value="Apurímac">Apurímac</option>
            <option value="Arequipa">Arequipa</option>
            <option value="Ayacucho">Ayacucho</option>
            <option value="Cajamarca">Cajamarca</option>
            <option value="Callao">Callao</option>
            <option value="Cusco">Cusco</option>
            <option value="Huancavelica">Huancavelica</option>
            <option value="Huánuco">Huánuco</option>
            <option value="Ica">Ica</option>
            <option value="Junín">Junín</option>
            <option value="La Libertad">La Libertad</option>
            <option value="Lambayeque">Lambayeque</option>
            <option value="Lima">Lima</option>
            <option value="Loreto">Loreto</option>
            <option value="Madre de Dios">Madre de Dios</option>
            <option value="Moquegua">Moquegua</option>
            <option value="Pasco">Pasco</option>
            <option value="Piura">Piura</option>
            <option value="Puno">Puno</option>
            <option value="San Martín">San Martín</option>
            <option value="Tacna">Tacna</option>
            <option value="Tumbes">Tumbes</option>
            <option value="Ucayali">Ucayali</option>
          </select>
        </div>
        <div class="form-group">
          <label>Provincia</label>
          <select [(ngModel)]="formularioSAC.paso_2.provincia_empresa">
            <option value="">Seleccione una provincia</option>
            <!-- Provincias de Amazonas -->
            <option value="Chachapoyas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Chachapoyas</option>
            <option value="Bagua" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Bagua</option>
            <option value="Bongará" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Bongará</option>
            <option value="Condorcanqui" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Condorcanqui</option>
            <option value="Luya" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Luya</option>
            <option value="Rodríguez de Mendoza" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Rodríguez de Mendoza</option>
            <option value="Utcubamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Amazonas'">Utcubamba</option>

            <!-- Provincias de Áncash -->
            <option value="Huaraz" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Huaraz</option>
            <option value="Aija" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Aija</option>
            <option value="Antonio Raymondi" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Antonio Raymondi</option>
            <option value="Asunción" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Asunción</option>
            <option value="Bolognesi" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Bolognesi</option>
            <option value="Carhuaz" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Carhuaz</option>
            <option value="Carlos Fermín Fitzcarrald" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Carlos Fermín Fitzcarrald</option>
            <option value="Casma" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Casma</option>
            <option value="Corongo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Corongo</option>
            <option value="Huari" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Huari</option>
            <option value="Huarmey" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Huarmey</option>
            <option value="Huaylas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Huaylas</option>
            <option value="Mariscal Luzuriaga" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Mariscal Luzuriaga</option>
            <option value="Ocros" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Ocros</option>
            <option value="Pallasca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Pallasca</option>
            <option value="Pomabamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Pomabamba</option>
            <option value="Recuay" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Recuay</option>
            <option value="Santa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Santa</option>
            <option value="Sihuas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Sihuas</option>
            <option value="Yungay" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Áncash'">Yungay</option>

            <!-- Provincias de Apurímac -->
            <option value="Abancay" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Abancay</option>
            <option value="Andahuaylas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Andahuaylas</option>
            <option value="Antabamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Antabamba</option>
            <option value="Aymaraes" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Aymaraes</option>
            <option value="Cotabambas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Cotabambas</option>
            <option value="Chincheros" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Chincheros</option>
            <option value="Grau" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Apurímac'">Grau</option>
            
            <!-- Provincias de Arequipa -->
            <option value="Arequipa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Arequipa</option>
            <option value="Camaná" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Camaná</option>
            <option value="Caravelí" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Caravelí</option>
            <option value="Castilla" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Castilla</option>
            <option value="Caylloma" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Caylloma</option>
            <option value="Condesuyos" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Condesuyos</option>
            <option value="Islay" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">Islay</option>
            <option value="La Unión" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Arequipa'">La Unión</option>
            
            <!-- Provincias de Ayacucho -->
            <option value="Huamanga" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Huamanga</option>
            <option value="Cangallo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Cangallo</option>
            <option value="Huanca Sancos" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Huanca Sancos</option>
            <option value="Huanta" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Huanta</option>
            <option value="La Mar" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">La Mar</option>
            <option value="Lucanas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Lucanas</option>
            <option value="Parinacochas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Parinacochas</option>
            <option value="Páucar del Sara Sara" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Páucar del Sara Sara</option>
            <option value="Sucre" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Sucre</option>
            <option value="Víctor Fajardo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Víctor Fajardo</option>
            <option value="Vilcas Huamán" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ayacucho'">Vilcas Huamán</option>
            
            <!-- Provincias de Cajamarca -->
            <option value="Cajamarca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Cajamarca</option>
            <option value="Cajabamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Cajabamba</option>
            <option value="Celendín" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Celendín</option>
            <option value="Chota" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Chota</option>
            <option value="Contumazá" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Contumazá</option>
            <option value="Cutervo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Cutervo</option>
            <option value="Hualgayoc" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Hualgayoc</option>
            <option value="Jaén" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Jaén</option>
            <option value="San Ignacio" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">San Ignacio</option>
            <option value="San Marcos" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">San Marcos</option>
            <option value="San Miguel" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">San Miguel</option>
            <option value="San Pablo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">San Pablo</option>
            <option value="Santa Cruz" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cajamarca'">Santa Cruz</option>
            
            <!-- Provincias de Callao -->
            <option value="Callao" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Callao'">Callao</option>
            
            <!-- Provincias de Cusco -->
            <option value="Cusco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Cusco</option>
            <option value="Acomayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Acomayo</option>
            <option value="Anta" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Anta</option>
            <option value="Calca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Calca</option>
            <option value="Canas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Canas</option>
            <option value="Canchis" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Canchis</option>
            <option value="Chumbivilcas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Chumbivilcas</option>
            <option value="Espinar" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Espinar</option>
            <option value="La Convención" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">La Convención</option>
            <option value="Paruro" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Paruro</option>
            <option value="Paucartambo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Paucartambo</option>
            <option value="Quispicanchi" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Quispicanchi</option>
            <option value="Urubamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Cusco'">Urubamba</option>
            
            <!-- Provincias de Huancavelica -->
            <option value="Huancavelica" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Huancavelica</option>
            <option value="Acobamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Acobamba</option>
            <option value="Angaraes" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Angaraes</option>
            <option value="Castrovirreyna" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Castrovirreyna</option>
            <option value="Churcampa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Churcampa</option>
            <option value="Colcabamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Colcabamba</option>
            <option value="Huaytará" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Huaytará</option>
            <option value="Tayacaja" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huancavelica'">Tayacaja</option>
            
            <!-- Provincias de Huánuco -->
            <option value="Huánuco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Huánuco</option>
            <option value="Ambo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Ambo</option>
            <option value="Dos de Mayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Dos de Mayo</option>
            <option value="Huacaybamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Huacaybamba</option>
            <option value="Huamalíes" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Huamalíes</option>
            <option value="Leoncio Prado" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Leoncio Prado</option>
            <option value="Marañón" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Marañón</option>
            <option value="Pachitea" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Pachitea</option>
            <option value="Puerto Inca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Puerto Inca</option>
            <option value="Lauricocha" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Lauricocha</option>
            <option value="Yarowilca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Huánuco'">Yarowilca</option>
            
            <!-- Provincias de Ica -->
            <option value="Ica" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ica'">Ica</option>
            <option value="Chincha" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ica'">Chincha</option>
            <option value="Nazca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ica'">Nazca</option>
            <option value="Palpa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ica'">Palpa</option>
            <option value="Pisco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ica'">Pisco</option>
            
            <!-- Provincias de Junín -->
            <option value="Huancayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Huancayo</option>
            <option value="Concepción" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Concepción</option>
            <option value="Chanchamayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Chanchamayo</option>
            <option value="Jauja" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Jauja</option>
            <option value="Junín" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Junín</option>
            <option value="Satipo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Satipo</option>
            <option value="Tarma" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Tarma</option>
            <option value="Yauli" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Yauli</option>
            <option value="Chupaca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Junín'">Chupaca</option>
            
            <!-- Provincias de La Libertad -->
            <option value="Trujillo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Trujillo</option>
            <option value="Ascope" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Ascope</option>
            <option value="Bolívar" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Bolívar</option>
            <option value="Chepén" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Chepén</option>
            <option value="Julcán" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Julcán</option>
            <option value="Otuzco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Otuzco</option>
            <option value="Pacasmayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Pacasmayo</option>
            <option value="Pataz" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Pataz</option>
            <option value="Sánchez Carrión" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Sánchez Carrión</option>
            <option value="Santiago de Chuco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Santiago de Chuco</option>
            <option value="Gran Chimú" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Gran Chimú</option>
            <option value="Virú" *ngIf="formularioSAC.paso_2.departamento_empresa === 'La Libertad'">Virú</option>
            
            <!-- Provincias de Lambayeque -->
            <option value="Chiclayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lambayeque'">Chiclayo</option>
            <option value="Ferreñafe" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lambayeque'">Ferreñafe</option>
            <option value="Lambayeque" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lambayeque'">Lambayeque</option>
            
            <!-- Provincias de Lima -->
            <option value="Lima" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Lima</option>
            <option value="Barranca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Barranca</option>
            <option value="Cajatambo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Cajatambo</option>
            <option value="Canta" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Canta</option>
            <option value="Cañete" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Cañete</option>
            <option value="Huaral" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Huaral</option>
            <option value="Huarochirí" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Huarochirí</option>
            <option value="Huaura" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Huaura</option>
            <option value="Oyón" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Oyón</option>
            <option value="Yauyos" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Lima'">Yauyos</option>
            
            <!-- Provincias de Loreto -->
            <option value="Maynas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Maynas</option>
            <option value="Alto Amazonas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Alto Amazonas</option>
            <option value="Loreto" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Loreto</option>
            <option value="Mariscal Ramón Castilla" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Mariscal Ramón Castilla</option>
            <option value="Requena" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Requena</option>
            <option value="Ucayali" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Ucayali</option>
            <option value="Datem del Marañón" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Datem del Marañón</option>
            <option value="Putumayo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Loreto'">Putumayo</option>
            
            <!-- Provincias de Madre de Dios -->
            <option value="Tambopata" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Madre de Dios'">Tambopata</option>
            <option value="Manu" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Madre de Dios'">Manu</option>
            <option value="Tahuamanu" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Madre de Dios'">Tahuamanu</option>
            
            <!-- Provincias de Moquegua -->
            <option value="Mariscal Nieto" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Moquegua'">Mariscal Nieto</option>
            <option value="General Sánchez Cerro" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Moquegua'">General Sánchez Cerro</option>
            <option value="Ilo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Moquegua'">Ilo</option>
            
            <!-- Provincias de Pasco -->
            <option value="Pasco" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Pasco'">Pasco</option>
            <option value="Daniel Alcides Carrión" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Pasco'">Daniel Alcides Carrión</option>
            <option value="Oxapampa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Pasco'">Oxapampa</option>
            
            <!-- Provincias de Piura -->
            <option value="Piura" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Piura</option>
            <option value="Ayabaca" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Ayabaca</option>
            <option value="Huancabamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Huancabamba</option>
            <option value="Morropón" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Morropón</option>
            <option value="Paita" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Paita</option>
            <option value="Sullana" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Sullana</option>
            <option value="Talara" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Talara</option>
            <option value="Sechura" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Piura'">Sechura</option>
            
            <!-- Provincias de Puno -->
            <option value="Puno" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Puno</option>
            <option value="Azángaro" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Azángaro</option>
            <option value="Carabaya" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Carabaya</option>
            <option value="Chucuito" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Chucuito</option>
            <option value="El Collao" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">El Collao</option>
            <option value="Huancané" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Huancané</option>
            <option value="Lampa" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Lampa</option>
            <option value="Melgar" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Melgar</option>
            <option value="Moho" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Moho</option>
            <option value="San Antonio de Putina" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">San Antonio de Putina</option>
            <option value="San Román" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">San Román</option>
            <option value="Sandia" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Sandia</option>
            <option value="Yunguyo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Puno'">Yunguyo</option>
            
            <!-- Provincias de San Martín -->
            <option value="Moyobamba" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Moyobamba</option>
            <option value="Bellavista" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Bellavista</option>
            <option value="El Dorado" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">El Dorado</option>
            <option value="Huallaga" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Huallaga</option>
            <option value="Lamas" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Lamas</option>
            <option value="Mariscal Cáceres" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Mariscal Cáceres</option>
            <option value="Picota" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Picota</option>
            <option value="Rioja" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Rioja</option>
            <option value="San Martín" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">San Martín</option>
            <option value="Tocache" *ngIf="formularioSAC.paso_2.departamento_empresa === 'San Martín'">Tocache</option>
            
            <!-- Provincias de Tacna -->
            <option value="Tacna" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tacna'">Tacna</option>
            <option value="Candarave" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tacna'">Candarave</option>
            <option value="Jorge Basadre" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tacna'">Jorge Basadre</option>
            <option value="Tarata" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tacna'">Tarata</option>
            
            <!-- Provincias de Tumbes -->
            <option value="Tumbes" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tumbes'">Tumbes</option>
            <option value="Contralmirante Villar" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tumbes'">Contralmirante Villar</option>
            <option value="Zarumilla" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Tumbes'">Zarumilla</option>
            
            <!-- Provincias de Ucayali -->
            <option value="Coronel Portillo" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ucayali'">Coronel Portillo</option>
            <option value="Atalaya" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ucayali'">Atalaya</option>
            <option value="Padre Abad" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ucayali'">Padre Abad</option>
            <option value="Purús" *ngIf="formularioSAC.paso_2.departamento_empresa === 'Ucayali'">Purús</option>
          </select>
        </div>
        <div class="form-group">
          <label>Objetivo de la Empresa <span class="required">*</span></label>
          <textarea [(ngModel)]="formularioSAC.paso_2.objetivo" rows="4" placeholder="Describa el objetivo principal de la empresa"></textarea>
        </div>
      </div>
      
      <!-- Paso 3: Socios -->
      <div *ngSwitchCase="2">
        <h3>Socios</h3>
        <div class="info-message">
          <p><i class="fa fa-info-circle"></i>Puedes agregar hasta 3 socios.</p>
          <p><i class="fa fa-warning"></i> El capital total (suma de todos los aportes) no puede exceder {{CAPITAL_MAXIMO | currency:'PEN ':'symbol':'1.2-2'}}.</p>
        </div>
        
        <div class="socios-list">
          <div class="socio-item" *ngFor="let socio of formularioSAC.paso_3; let i = index">
            <div class="socio-header">
              <h4>Socio {{i + 1}}</h4>
              <button class="btn-remove" *ngIf="formularioSAC.paso_3.length > 2" (click)="eliminarSocio(i)">
                Eliminar Socio
              </button>
            </div>
            
            <div class="form-group">
              <label>Nombre del Socio <span class="required">*</span></label>
              <input type="text" [(ngModel)]="socio.nombre_socio" placeholder="Ingrese el nombre del socio">
            </div>
            <div class="form-group">
              <label>Nacionalidad <span class="required">*</span></label>
              <input type="text" [(ngModel)]="socio.nacionalidad_socio" placeholder="Ingrese la nacionalidad">
            </div>
            <div class="form-group">
              <label>DNI <span class="required">*</span></label>
              <input type="text" [(ngModel)]="socio.dni_socio" placeholder="Ingrese el DNI">
            </div>
            <div class="form-group">
              <label>Profesión <span class="required">*</span></label>
              <input type="text" [(ngModel)]="socio.profesion_socio" placeholder="Ingrese la profesión">
            </div>
            <div class="form-group">
              <label>Estado Civil <span class="required">*</span></label>
              <select [(ngModel)]="socio.estado_civil_socio">
                <option value="">Seleccione una opción</option>
                <option value="soltero">Soltero/a</option>
                <option value="casado">Casado/a</option>
                <option value="divorciado">Divorciado/a</option>
                <option value="viudo">Viudo/a</option>
              </select>
            </div>
            
            <!-- Campos condicionales para cónyuge del socio -->
            <div *ngIf="socio.estado_civil_socio === 'casado'">
              <div class="form-group">
                <label>Nombre del Cónyuge</label>
                <input type="text" [(ngModel)]="socio.nombre_conyuge_socio" placeholder="Ingrese el nombre del cónyuge">
              </div>
              <div class="form-group">
                <label>DNI del Cónyuge</label>
                <input type="text" [(ngModel)]="socio.dni_conyuge_socio" placeholder="Ingrese el DNI del cónyuge">
              </div>
            </div>
            
            <!-- Aportes del socio -->
            <div class="aportes-socio">
              <h5>Aportes del Socio {{i + 1}}</h5>
              <div class="aporte-item" *ngFor="let aporte of socio.aportes; let j = index">
                <div class="form-group">
                  <label>Descripción del Aporte</label>
                  <input type="text" 
                         [(ngModel)]="aporte.descripcion" 
                         placeholder="Describa el aporte"
                         [readonly]="tipoFormularioSeleccionado === tiposFormulario.SACBD">
                </div>
                <div class="form-group">
                  <label>Valor del Aporte</label>
                  <input type="number" 
                         [(ngModel)]="aporte.monto" 
                         (ngModelChange)="onAporteSocioChange(i, j, $event)"
                         placeholder="Ingrese el valor del aporte"
                         
                         [max]="CAPITAL_MAXIMO">
                </div>
                <button class="btn-remove-small" *ngIf="socio.aportes.length > 1" (click)="eliminarAporteSocio(i, j)">
                  Eliminar
                </button>
              </div>
              <button class="btn-add-small" 
                      (click)="agregarAporteSocio(i)"
                      *ngIf="!(tipoFormularioSeleccionado === tiposFormulario.SACBD && socio.aportes.length >= 1)">
                Agregar Aporte
              </button>
            </div>
          </div>
        </div>
        
        <button class="btn-add" (click)="agregarSocio()" [disabled]="formularioSAC.paso_3.length >= 3">
          Agregar Socio
        </button>
      </div>
      
      <!-- Paso 4: Capital y Aportes -->
      <div *ngSwitchCase="3">
        <h3>Capital Total y Aportes del Titular</h3>
        
        <!-- Campo de capital calculado automáticamente -->
        <div class="form-group">
          <label>Monto de Capital Total <span class="required">*</span></label>
          <input type="number" 
                 [value]="calcularCapitalTotal()" 
                 readonly 
                 class="readonly-field"
                 placeholder="Se calcula automáticamente">
          <small class="help-text">Este monto se calcula automáticamente como la suma de todos los aportes de socios y titular.</small>
          <small class="help-text" *ngIf="calcularCapitalTotal() >= CAPITAL_MAXIMO" class="warning-text">
            ⚠️ Se ha alcanzado el límite máximo de {{CAPITAL_MAXIMO | currency:'PEN ':'symbol':'1.2-2'}}
          </small>
        </div>
        
        <!-- Mensaje informativo según el tipo de formulario -->
        <div class="info-message" *ngIf="tipoFormularioSeleccionado === tiposFormulario.SACBD">
          <p><i class="fa fa-info-circle"></i> Para SAC con bienes dinerarios, el aporte debe ser exclusivamente en dinero en efectivo.</p>
          <p><i class="fa fa-warning"></i> El capital máximo permitido es {{CAPITAL_MAXIMO | currency:'PEN ':'symbol':'1.2-2'}}.</p>
        </div>
        <div class="info-message" *ngIf="tipoFormularioSeleccionado === tiposFormulario.SACBND">
          <p><i class="fa fa-info-circle"></i> Para SAC con bienes no dinerarios, puede agregar múltiples aportes de diferentes tipos.</p>
          <p><i class="fa fa-warning"></i> El capital máximo permitido es {{CAPITAL_MAXIMO | currency:'PEN ':'symbol':'1.2-2'}}.</p>
        </div>
        
        <div class="aportes-list">
          <div class="aporte-item" *ngFor="let aporte of formularioSAC.paso_4.aportes; let i = index">
            <div class="form-group">
              <label>Descripción del Aporte <span class="required">*</span></label>
              <input type="text" [(ngModel)]="aporte.descripcion" placeholder="Describa el aporte" 
                [readonly]="tipoFormularioSeleccionado === tiposFormulario.SACBD">
            </div>
            <div class="form-group">
              <label>Valor del Aporte <span class="required">*</span></label>
              <input type="number" 
                     [(ngModel)]="aporte.monto" 
                     (ngModelChange)="onAporteTitularChange(i, $event)"
                     placeholder="Ingrese el valor del aporte"
                     min="0"
                     [max]="CAPITAL_MAXIMO">
            </div>
            <button class="btn-remove" *ngIf="formularioSAC.paso_4.aportes.length > 1" (click)="eliminarAporte(i)">
              Eliminar
            </button>
          </div>
        </div>
        <button class="btn-add" (click)="agregarAporte()" 
                [disabled]="(tipoFormularioSeleccionado === tiposFormulario.SACBD && formularioSAC.paso_4.aportes.length >= 1) || calcularCapitalTotal() >= CAPITAL_MAXIMO">
          Agregar Aporte
        </button>
        
        <!-- Mostrar total actual -->
        <div class="capital-summary">
          <p><strong>Capital Total Actual: {{calcularCapitalTotal() | currency:'PEN ':'symbol':'1.2-2'}}</strong></p>
          <p *ngIf="calcularCapitalTotal() < CAPITAL_MAXIMO">Disponible: {{(CAPITAL_MAXIMO - calcularCapitalTotal()) | currency:'PEN ':'symbol':'1.2-2'}}</p>
        </div>
      </div>
      
      <!-- Paso 5: Apoderado -->
      <div *ngSwitchCase="4">
        <h3>Datos del Apoderado</h3>
        <div class="form-group">
          <label>Nombre del Apoderado <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_5.apoderado" placeholder="Ingrese el nombre del apoderado">
        </div>
        <div class="form-group">
          <label>DNI del Apoderado <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_5.dni_apoderado" placeholder="Ingrese el DNI del apoderado">
        </div>
      </div>
      
      <!-- Paso 6: Confirmación -->
      <div *ngSwitchCase="5">
        <h3>Confirmación</h3>
        <div class="form-group">
          <label>Ciudad <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formularioSAC.paso_6.ciudad" placeholder="Ingrese la ciudad" readonly>
        </div>
        <div class="form-group">
          <label>Fecha de Registro</label>
          <input type="date" [(ngModel)]="formularioSAC.paso_6.fecha_registro" readonly>
        </div>
        <div class="confirmation-message">
          <p>Por favor revise cuidadosamente toda la información antes de finalizar.</p>
          <p>Al hacer clic en "Finalizar", confirma que todos los datos proporcionados son correctos.</p>
        </div>
      </div>
    </div>
    
    <!-- Navegación entre pasos -->
    <div class="form-navigation">
      <button *ngIf="pasoActual > 0" class="btn-prev" (click)="pasoAnterior()">Anterior</button>
      <button *ngIf="pasoActual < pasos.length - 1" class="btn-next" (click)="pasoSiguiente()">Siguiente</button>
      <button *ngIf="pasoActual === pasos.length - 1" class="btn-submit" (click)="mostrarResumen()">Finalizar</button>
    </div>
  </div>
  
  

  <!-- Resumen del formulario -->
  <div *ngIf="nombreEmpresa && mostrandoResumen && !formularioEnviado" class="form-summary">
    <h3>Resumen de la Información</h3>
    <div class="summary-content">
      <div class="summary-section">
        <h4>Tipo de Empresa</h4>
        <p><strong>Tipo:</strong> {{tipoFormularioSeleccionado === tiposFormulario.SACBD ? 'SAC con Bienes Dinerarios' : 'SAC con Bienes No Dinerarios'}}</p>
      </div>
      
      <div class="summary-section">
        <h4>Datos Personales</h4>
        <p><strong>Nacionalidad:</strong> {{formularioSAC.paso_1.nacionalidad}}</p>
        <p *ngIf="formularioSAC.paso_1.profesion"><strong>Profesión:</strong> {{formularioSAC.paso_1.profesion}}</p>
        <p *ngIf="formularioSAC.paso_1.estado_civil"><strong>Estado Civil:</strong> {{formularioSAC.paso_1.estado_civil}}</p>
        <p *ngIf="formularioSAC.paso_1.direccion"><strong>Dirección:</strong> {{formularioSAC.paso_1.direccion}}</p>
        <div *ngIf="formularioSAC.paso_1.estado_civil === 'casado'">
          <p><strong>Nombre del Cónyuge:</strong> {{formularioSAC.paso_1.nombre_conyuge}}</p>
          <p><strong>DNI del Cónyuge:</strong> {{formularioSAC.paso_1.dni_conyuge}}</p>
        </div>
      </div>
      
      <div class="summary-section">
        <h4>Datos de la Empresa</h4>
        <p><strong>Nombre de la Empresa:</strong> {{nombreEmpresa}}</p>
        <p *ngIf="formularioSAC.paso_2.direccion_empresa"><strong>Dirección:</strong> {{formularioSAC.paso_2.direccion_empresa}}</p>
        <p *ngIf="formularioSAC.paso_2.provincia_empresa"><strong>Provincia:</strong> {{formularioSAC.paso_2.provincia_empresa}}</p>
        <p *ngIf="formularioSAC.paso_2.departamento_empresa"><strong>Departamento:</strong> {{formularioSAC.paso_2.departamento_empresa}}</p>
        <p><strong>Objetivo:</strong> {{formularioSAC.paso_2.objetivo}}</p>
      </div>
      
      <div class="summary-section">
        <h4>Socios</h4>
        <div *ngFor="let socio of formularioSAC.paso_3; let i = index" class="socio-summary">
          <h5>Socio {{i + 1}}</h5>
          <p><strong>Nombre:</strong> {{socio.nombre_socio}}</p>
          <p><strong>DNI:</strong> {{socio.dni_socio}}</p>
          <p><strong>Nacionalidad:</strong> {{socio.nacionalidad_socio}}</p>
          <p><strong>Profesión:</strong> {{socio.profesion_socio}}</p>
          <p><strong>Estado Civil:</strong> {{socio.estado_civil_socio}}</p>
          <div *ngIf="socio.estado_civil_socio === 'casado'">
            <p><strong>Cónyuge:</strong> {{socio.nombre_conyuge_socio}} ({{socio.dni_conyuge_socio}})</p>
          </div>
          <div *ngIf="socio.aportes.length > 0">
            <p><strong>Aportes:</strong></p>
            <ul>
              <li *ngFor="let aporte of socio.aportes">
                {{aporte.descripcion}} - {{aporte.monto | currency:'PEN ':'symbol':'1.2-2'}}
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="summary-section">
        <h4>Capital y Aportes</h4>
        <p><strong>Monto de Capital:</strong> {{formularioSAC.paso_4.monto_capital | currency:'PEN ':'symbol':'1.2-2'}}</p>
        <p><strong>Aportes:</strong></p>
        <ul>
          <li *ngFor="let aporte of formularioSAC.paso_4.aportes">
            {{aporte.descripcion}} - {{aporte.monto | currency:'PEN ':'symbol':'1.2-2'}}
          </li>
        </ul>
      </div>
      
      <div class="summary-section">
        <h4>Datos del Apoderado</h4>
        <p><strong>Nombre del Apoderado:</strong> {{formularioSAC.paso_5.apoderado}}</p>
        <p><strong>DNI del Apoderado:</strong> {{formularioSAC.paso_5.dni_apoderado}}</p>
      </div>
      
      <div class="summary-section">
        <h4>Confirmación</h4>
        <p><strong>Ciudad:</strong> {{formularioSAC.paso_6.ciudad}}</p>
        <p><strong>Fecha de Registro:</strong> {{formularioSAC.paso_6.fecha_registro | date:'dd/MM/yyyy'}} </p>
      </div>
    </div>
    <div class="summary-actions">
      <button class="btn-edit" (click)="editarFormulario()">Editar</button>
      <button class="btn-confirm" (click)="enviarFormulario()">Enviar</button>
    </div>
  </div>
  
  <!-- Formulario de pago después de enviar -->
  <div *ngIf="formularioEnviado && !pagoConfirmado  && !pago2"  class="payment-form">
    <h3>Completar Pago</h3>
    <div class="payment-methods">
      <div class="payment-method" *ngFor="let metodo of metodosPago" 
          [ngClass]="{'selected': metodoPagoSeleccionado === metodo.id}"
          (click)="seleccionarMetodoPago(metodo.id)">
        <img [src]="metodo.imagen" [alt]="metodo.nombre">
        <span>{{metodo.nombre}}</span>
      </div>
    </div>
    <button class="btn-pay" [disabled]="!metodoPagoSeleccionado" (click)="confirmarPago()">
      Realizar Pago
    </button>
  </div>

    <!-- Mensaje de éxito después del pago -->
    <div *ngIf="pagoConfirmado || pago2" class="success-message">
      <div class="success-icon">✓</div>
      <h3>Felicitaciones</h3>
      <p>Tu empresa ({{nombreEmpresa}}) será registrada en un plazo no mayor a 10 días.</p>
      <p>Atento a tu correo, el notario te citará a firmar.</p>
      <p>"Revisa tu pestaña de Citas"</p>
    </div>
</div>