
<div class="form-card">
  <!-- Estado de carga -->
  <div *ngIf="cargandoEstado" class="loading-state">
    <p>Cargando informaci√≥n de la reserva...</p>
    <div class="spinner"></div>
  </div>
  
  <!-- Estado inicial: deshabilitado -->
  <div *ngIf="!cargandoEstado && !mostrarFormulario && nombreEmpresa" class="form-disabled">
    <p>Una vez tengamos el nombre de tu empresa te notificaremos y podr√°s acceder al formulario.</p>
  </div>
  
  <!-- Selector de tipo de empresa -->
  <div *ngIf="mostrarFormulario && nombreEmpresa" class="form-type-selector">
    <h2>Formulario de Minuta</h2>
    <h3>Seleccione el tipo de empresa</h3>
    <div class="form-type-options">
      <div class="form-type-option" 
          [ngClass]="{'selected': tipoEmpresaSeleccionado === tiposEmpresa.EIRL}"
          (click)="cambiarTipoEmpresa(tiposEmpresa.EIRL)">
        <div class="option-icon">üè≠</div>
        <div class="option-content">
          <h4>Empresa Individual de Responsabilidad Limitada (EIRL)</h4>
          <p>Para personas naturales que desean constituir una empresa unipersonal.</p>
        </div>
      </div>
      <div class="form-type-option" 
          [ngClass]="{'selected': tipoEmpresaSeleccionado === tiposEmpresa.SAC}"
          (click)="cambiarTipoEmpresa(tiposEmpresa.SAC)">
        <div class="option-icon">üè¢</div>
        <div class="option-content">
          <h4>Sociedad An√≥nima Cerrada (SAC)</h4>
          <p>Para empresas con m√∫ltiples socios y capital dividido en acciones.</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Renderizar componente espec√≠fico seg√∫n el tipo seleccionado -->
  <div *ngIf="mostrarFormulario && nombreEmpresa">
    <!-- Componente EIRL -->
    <app-form-eirl 
      *ngIf="tipoEmpresaSeleccionado === tiposEmpresa.EIRL"
      [userData]="userData"
      [nombreEmpresa]="nombreEmpresa"
      [estadoReserva]="estadoReserva"
      (estadoTramiteChange)="onEstadoTramiteChange($event)"
      (porcentajeProgresoChange)="onPorcentajeProgresoChange($event)"
      (estadoPagoChange)="onEstadoPagoChange($event)"
      (pagoActualChange)="onPagoActualChange($event)">
    </app-form-eirl>
    
    <!-- Componente SAC -->
    <app-form-sac 
      *ngIf="tipoEmpresaSeleccionado === tiposEmpresa.SAC"
      [userData]="userData"
      [nombreEmpresa]="nombreEmpresa"
      [estadoReserva]="estadoReserva"
      (estadoTramiteChange)="onEstadoTramiteChange($event)"
      (porcentajeProgresoChange)="onPorcentajeProgresoChange($event)"
      (estadoPagoChange)="onEstadoPagoChange($event)"
      (pagoActualChange)="onPagoActualChange($event)">
    </app-form-sac>
  </div>
</div>