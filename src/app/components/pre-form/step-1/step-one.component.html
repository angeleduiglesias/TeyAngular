<div class="tipo-empresa-container">
  <h2>Datos de Empresa</h2>
  <form [formGroup]="tipoEmpresaForm">
    <div class="form-group">
      <label>Tipo de Empresa <span class="required">*</span></label>
     
      <div class="form-options">
        <div class="option">
          <input type="radio" id="sa" formControlName="tipoEmpresa" value="SA">
          <label for="sa">Sociedad Anónima (S.A.)</label>
          <p>Para empresas con accionistas y capital dividido en acciones</p>
        </div>
        
        <div class="option">
          <input type="radio" id="srl" formControlName="tipoEmpresa" value="SRL">
          <label for="srl">Sociedad de Resp. Limitada (S.R.L.)</label>
          <p>Para empresas con socios y capital dividido en participaciones</p>
        </div>
        
        <div class="option">
          <input type="radio" id="empresario" formControlName="tipoEmpresa" value="Empresario">
          <label for="empresario">Empresario Individual</label>
          <p>Para autónomos y profesionales independientes</p>
        </div>
        
        <div class="option">
          <input type="radio" id="otro" formControlName="tipoEmpresa" value="Otro">
          <label for="otro">Otro tipo</label>
          <p>Cooperativas, asociaciones, etc.</p>
        </div>
      </div>
     
      <div *ngIf="tipoEmpresaForm.get('tipoEmpresa')?.invalid && (tipoEmpresaForm.get('tipoEmpresa')?.dirty || tipoEmpresaForm.get('tipoEmpresa')?.touched)" class="error-message">
        <div *ngIf="tipoEmpresaForm.get('tipoEmpresa')?.errors?.['required']">Campo obligatorio.</div>
      </div>
    </div>
   
    <!-- Campo de número de socios que aparece solo cuando se selecciona SA -->
    <div class="form-group socios-group" *ngIf="tipoEmpresaForm.get('tipoEmpresa')?.value === 'SA'">
      <label for="numeroSocios">Número de Socios <span class="required">*</span></label>
      
      <div class="socios-options">
        <div class="option-buttons">
          <button 
            type="button" 
            *ngFor="let opcion of opcionesSocios" 
            class="option-btn" 
            [class.selected]="tipoEmpresaForm.get('numeroSocios')?.value === opcion && !mostrarInputPersonalizado"
            (click)="tipoEmpresaForm.get('numeroSocios')?.setValue(opcion); mostrarInputPersonalizado = false">
            {{ opcion }}
          </button>
          <button 
            type="button" 
            class="option-btn custom-btn" 
            [class.selected]="mostrarInputPersonalizado"
            (click)="cambiarTipoInput(true)">
            Otro
          </button>
        </div>
        
        <div *ngIf="mostrarInputPersonalizado" class="custom-input-container">
          <input 
            type="number" 
            class="custom-socios-input" 
            placeholder="Ingrese número personalizado" 
            min="1"
            (input)="onCustomSociosInput($event)"
          >
        </div>
      </div>
      
      <div *ngIf="tipoEmpresaForm.get('numeroSocios')?.invalid && (tipoEmpresaForm.get('numeroSocios')?.dirty || tipoEmpresaForm.get('numeroSocios')?.touched)" class="error-message">
        <div *ngIf="tipoEmpresaForm.get('numeroSocios')?.errors?.['required']">Campo obligatorio.</div>
        <div *ngIf="tipoEmpresaForm.get('numeroSocios')?.errors?.['min']">Debe ser al menos 1.</div>
      </div>
    </div>
   
    <div class="form-group">
      <label for="nombreEmpresa">Nombre de la Empresa <span class="required">*</span></label>
      <input type="text" id="nombreEmpresa" formControlName="nombreEmpresa" placeholder="Ingrese el nombre de su empresa">
      <div *ngIf="tipoEmpresaForm.get('nombreEmpresa')?.invalid && (tipoEmpresaForm.get('nombreEmpresa')?.dirty || tipoEmpresaForm.get('nombreEmpresa')?.touched)" class="error-message">
        <div *ngIf="tipoEmpresaForm.get('nombreEmpresa')?.errors?.['required']">Campo obligatorio.</div>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" class="primary-button" (click)="siguiente()" [disabled]="tipoEmpresaForm.invalid">
        Siguiente ›
      </button>
    </div>
  </form>
</div>